<main ng-controller="mainController as MC">
	<div id="markethome-bg">
		<div class="row">
			<div class="1u"></div>
			<div class="10u">
			<div class = "row" >
				<div class="col-sm-offset-0 col-sm-10">
					<img src="views/img/banner_main.png" style="width:100%; padding: 10px 10px 10px 10px;"></img>
				</div>

				<div class="col-sm-offset-0 col-sm-2">
				        <a href="/"> <button type="submit" class="btn btn-success btn-md btn-block" ng-click = MC.logout()>Logout</button></a>
				        <div style="height:5px;"></div>
				        <a href="/profile"> <button type="submit" class="btn btn-primary btn-md btn-block">Account</button></a>
				</div>
			</div>

			<br>

			<div id="marketMain">

				<!--PROFILE INFO-->
				<div id="userProfile" ng-controller="mainController as MC">
					<div class="panel panel-primary">
					
						<div class="panel-heading">
							<h3 class="panel-title">Your Profile</h3>
						</div>

						<div class="panel-body" style="background-color:#F8F5F0;">
							<div class="table-responsive">
							  <table class="table">
							  	<tr><td>Username: <div class="user-item">{{MC.userinfo.username}}</div></td></tr>
							   	<tr><td>Email: <div class="user-item">{{MC.userinfo.email}}</div></td></tr>
							   	<tr><td>Phone: <div class="user-item">{{MC.userinfo.phone}}</div></td></tr>
							   	<tr><td>Booth Name: <div class="user-item">{{MC.userinfo.boothName}}</div></td></tr>
							   	<tr><td>Booth Type: <div class="user-item">{{MC.userinfo.boothtype}}</div></td></tr>
							   	<tr><td>Products: <div class="user-item">{{MC.userinfo.products}}</div></td></tr>
							   	<tr><td>Bio: <div class="user-item">{{MC.userinfo.bio}}</div></td></tr>
							  </table>
							</div>

						</div>
					</div>
					
					<!--BOOTH INFO -->
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title">Booth Types</h3>
						</div>

						<div class="panel-body" style="background-color:#F8F5F0;">
							<div class="table-responsive">
							  <table class="table">
							  	<tr><td><div style="color:#325D88">Merchandise: </div><div class="user-item">These booths focus on providing arts and crafts.</div></td></tr>
							   	<tr><td><span style="color:#93C54B">Produce: </span><div class="user-item">Book these booths to sell fresh pickings from your garden/farm.</div></td></tr>
							   	<tr><td><span style="color:#F47C3C">Lunch: </span><div class="user-item">Book a lunch booth to sell your prepared meals and snacks.</div></td></tr>
							  </table>
							</div>
						</div>
					</div>


				</div>

				<!--CALENDAR -->
				<div id="market" ng-controller="marketController as market">
					<div id="notices" style="border: 1px solid grey; border-radius: 5px; margin: 0% 1.5% 1.5% 1.5%;">
						<center>
							<h1 style="font-size:25px;font-weight:bold;font-family:serif;text-decoration:underline;">Important Notices<br><h1>
							<p style="font-size:20px;"><br>Click on a valid time slot to book a booth!<p>
						</center>
					</div>

					<div id="dateandmap" style="margin-top:2%;">
						<div id="calendar" class="col-sm-offset-3 col-sm-6">
						
							<div class="form-group" >
								<input type="date" class="form-control" style="text-align:center; font-size:18px" ng-model="market.date" ng-change=market.changeDate()>
							</div>
						</div>
					</div>


					<!--if the day is a sunday. display the whole map-->
					<div id="gangstaMap" class="col-sm-12" ng-if = "market.isSunday" style="border: 1px solid grey; border-radius: 5px; background-color:rgba(255,255,255,.85); padding-top:5%;">

						<div style="width:100%; height: 30px;">
							<p style="font-style:bold;font-family:serif;"><center>{{market.day}}</center></p>
						</div>

						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-primary" style="width: 30%; float:left;">
								<div class="panel-heading">Merchandise</div>
								<!--have two of them, if variable is 0, it will show unavailable, if 1 it will show available-->
								<div class="panel-body" ng-if = "market.boothAV[1]" id="booth-available" ng-click = market.bookBooth(1,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[1]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[1]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-primary" style="width: 30%;float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[2]" id="booth-available" ng-click = market.bookBooth(2,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[2]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[2]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-primary" style="width: 30%;float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[3]" id="booth-available" ng-click = market.bookBooth(3,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[3]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[3]}}">View vendor</a></div>
							</div>
							<div style="clear:both;"></div>
						</div>

						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-primary" style="width: 30%; float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[4]" id="booth-available" ng-click = market.bookBooth(4,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[4]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[4]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-primary" style="width: 30%;float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[5]" id="booth-available" ng-click = market.bookBooth(5,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[5]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[5]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-success" style="width: 30%;float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[6]" id="booth-available" ng-click = market.bookBooth(6,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[6]" id="booth-unavailable" >10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[6]}}">View vendor</a></div>
							</div>
							<div style="clear:both;"></div>
						</div>

						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-success" style="width: 30%; float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[7]" id="booth-available" ng-click = market.bookBooth(7,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[7]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[7]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-success" style="width: 30%;float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[8]" id="booth-available" ng-click = market.bookBooth(8,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[8]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[8]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-success" style="width: 30%;float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[9]" id="booth-available" ng-click = market.bookBooth(9,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[9]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[9]}}">View vendor</a></div>
							</div>
							<div style="clear:both;"></div>
						</div>

						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-warning" style="width: 30%; float:left;">
								<div class="panel-heading">Lunch</div>
								<div class="panel-body" ng-if = "market.boothAV[10]" id="booth-available" ng-click = market.bookBooth(10,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[10]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[10]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-warning" style="width: 30%;float:left;">
								<div class="panel-heading">Lunch</div>
								<div class="panel-body" ng-if = "market.boothAV[11]" id="booth-available" ng-click = market.bookBooth(11,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[11]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[11]}}">View vendor</a></div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-warning" style="width: 30%;float:left;">
								<div class="panel-heading">Lunch</div>
								<div class="panel-body" ng-if = "market.boothAV[12]" id="booth-available" ng-click = market.bookBooth(12,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[12]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[12]}}">View vendor</a></div>
							</div>
							<div style="clear:both;"></div>
						</div>
					</div>





					<!--if the day is not a sunday. display the whole map-->
					<div id="gangstaMap" class="col-sm-12" ng-if = "!market.isSunday" style="border: 1px solid grey; border-radius: 5px; background-color:rgba(255,255,255,.85); padding-top:5%;">
						<!-- <img id="gangstaCat" src="http://thefunniestpictures.com/wp-content/uploads/2013/09/funny-pics-al-catpone.jpg"/-->

						<div style="width:100%; height: 30px;">
							<p style="font-style:bold;font-family:serif;"><center>{{market.day}}</center></p>
						</div>

						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-primary" style="width: 30%; float:left;">
								<div class="panel-heading">Merchandise</div>
								<!--have two of them, if variable is 0, it will show unavailable, if 1 it will show available-->
								<div class="panel-body" ng-if = "market.boothAV[1]" id="booth-available" ng-click = market.bookBooth(1,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[1]" id="booth-unavailable" >10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[1]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[13]" id="booth-available" ng-click = market.bookBooth(1,16002000)>4pm - 8pm </div>
									<div class="panel-body" ng-if = "!market.boothAV[13]" id="booth-unavailable">4pm - 8pm <br> <a href="/profview/{{market.boothUserIDs[13]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-primary" style="width: 30%;float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[2]" id="booth-available" ng-click = market.bookBooth(2,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[2]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[2]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[14]" id="booth-available" ng-click = market.bookBooth(2,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[14]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[14]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-primary" style="width: 30%;float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[3]" id="booth-available" ng-click = market.bookBooth(3,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[3]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[3]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[15]" id="booth-available" ng-click = market.bookBooth(3,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[15]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[15]}}">View vendor</a></div>
								</div>
							</div>
							<div style="clear:both;"></div>
						</div>

						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-primary" style="width: 30%; float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[4]" id="booth-available" ng-click = market.bookBooth(4,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[4]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[4]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[16]" id="booth-available" ng-click = market.bookBooth(4,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[16]" id="booth-unavailable" >4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[16]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-primary" style="width: 30%;float:left;">
								<div class="panel-heading">Merchandise</div>
								<div class="panel-body" ng-if = "market.boothAV[5]" id="booth-available" ng-click = market.bookBooth(5,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[5]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[5]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[17]" id="booth-available" ng-click = market.bookBooth(5,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[17]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[17]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-success" style="width: 30%;float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[6]" id="booth-available" ng-click = market.bookBooth(6,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[6]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[6]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[18]" id="booth-available" ng-click = market.bookBooth(6,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[18]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[18]}}">View vendor</a></div>
								</div>
							</div>
							<div style="clear:both;"></div>
						</div>

						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-success" style="width: 30%; float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[7]" id="booth-available" ng-click = market.bookBooth(7,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[7]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[7]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[19]" id="booth-available" ng-click = market.bookBooth(7,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[19]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[19]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-success" style="width: 30%;float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[8]" id="booth-available" ng-click = market.bookBooth(8,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[8]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[8]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[20]" id="booth-available" ng-click = market.bookBooth(8,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[20]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[20]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-success" style="width: 30%;float:left;">
								<div class="panel-heading">Produce</div>
								<div class="panel-body" ng-if = "market.boothAV[9]" id="booth-available" ng-click = market.bookBooth(9,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[9]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[9]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[21]" id="booth-available" ng-click = market.bookBooth(9,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[21]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[21]}}">View vendor</a></div>
								</div>
							</div>
							<div style="clear:both;"></div>
						</div>
						
						<div style="padding-left:5%; padding-right: 2%;">
							<div class="panel panel-warning" style="width: 30%; float:left;">
								<div class="panel-heading">Lunch</div>
								<div class="panel-body" ng-if = "market.boothAV[10]" id="booth-available" ng-click = market.bookBooth(10,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[10]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[10]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[22]" id="booth-available" ng-click = market.bookBooth(10,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[22]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[22]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>

							<div class="panel panel-warning" style="width: 30%;float:left;">
								<div class="panel-heading">Lunch</div>
								<div class="panel-body" ng-if = "market.boothAV[11]" id="booth-available" ng-click = market.bookBooth(11,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[11]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[11]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[23]" id="booth-available" ng-click = market.bookBooth(11,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[23]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[23]}}">View vendor</a></div>
								</div>
							</div>

							<div style="width:3%;float:left;"><p>&nbsp;</p></div>
							<div class="panel panel-warning" style="width: 30%;float:left;">
								<div class="panel-heading">Lunch</div>
								<div class="panel-body" ng-if = "market.boothAV[12]" id="booth-available" ng-click = market.bookBooth(12,10001400)>10am - 2pm</div>
								<div class="panel-body" ng-if = "!market.boothAV[12]" id="booth-unavailable">10am - 2pm<br> <a href="/profview/{{market.boothUserIDs[12]}}">View vendor</a></div>
								<div style="border-top: 1px solid grey;">
									<div class="panel-body" ng-if = "market.boothAV[24]" id="booth-available" ng-click = market.bookBooth(12,16002000)>4pm - 8pm</div>
									<div class="panel-body" ng-if = "!market.boothAV[24]" id="booth-unavailable">4pm - 8pm<br> <a href="/profview/{{market.boothUserIDs[24]}}">View vendor</a></div>
								</div>
							</div>
							<div style="clear:both;"></div>
						</div>
					</div>

				</div>

				<!--BOOKING HISTORY-->
				<div id="bookingHistory" style="border: 1px solid gray; border-radius: 5px; float: left;">
					<table class="table table-striped table-hover">
					<thead>
					<tr>
					  <th></th>
					  <th>Bookings</th>
					  <th>Date</th>
					  <!-- <div style="padding-top:3%">
					  	<th id="history" class="btn btn-default btn-sm">History</th>
						  </div> -->
						</tr>
					</thead>
					
					<tbody ng-repeat="bookedBooth in MC.futureBooths | orderBy: ['dateSlot','timeSlot']">
					<!--TODO: set up the 'History' button to display the booths from the past. can use the boothHistory variable to ng-repeate it-->
						<tr>
						  <td>{{$index + 1}}</td>
						  <td>{{MC.getNeatBooth(bookedBooth)}}</td>
						  <td>{{MC.getNeatTime(bookedBooth)}}</td>
							<!--can remove this line for something nicer. but the ng-click is how we will make the function run-->
							<td><button type="button" ng-click = MC.cancelBooth(bookedBooth)>&nbsp;X&nbsp;</button></td>
						</tr>
					
					</tbody> 
					</table> 
				</div>
				</div>
				<div class="1u"></div>
			</div>
		</div>
	</div>
</main>
